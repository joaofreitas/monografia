\chapter{Proposta de Solução}

O presente

\section{Metodologia de desenvolvimento}
Para a realização deste trabalho, foi planejada uma metodologia de desenvolvimento na qual objetivou-se a construção da arquitetura do SMA por meio de uma metologia de desenvolvimento de SMAs. Inicialmente, foi necessário um levantamento de bibliografias relacionadas à Informática na Educação para o entendimento do problema do trabalho, além de levantamentos de uso de SMA em contextos pegagógicos.

Em seguida foi aplicada, foi realizado estudos aprofundados na metodologia MASE para a implementação deste trabalho. Após o levantamento inicial, seu uso é divido em duas fases, conforme explicado na seção~\ref{section:mase}, sendo a primeira delas essêncial para o levantamento dos requisitos necessários para cumprir os objetivos. A segunda fase foi importante para a distribuição das regras entre os agentes que existem no sistema. As primeiras subseções deverão detalhar a modelagem.

A arquitetura básica do sistema já havia sido previamente decidida~\cite{editalFrank}, sendo necessário detalhar seus requisitos por meio da metodologia MASE. Além disso, os Ambientes Virtuais de Aprendizagem deveriam ser capazes de comunicar-se com a solução proposta, ou seja, a comunicação deve ser feita de forma independente da linguagem de programação. Por fim, foi definido~\cite{editalFrank} o nome da aplicação solução à ser desenvolvida:~\emph{Frank}.

Posteriormente o trabalho seguiu-se com a implementação do SMA na linguagem JAVA, utilizando-se das ferramentas JADE e JBoss Seam. As subseções seguintes deverão detalhar a implementação do Sistema Multiagente e da camada web, bem como a sua integração.

Por fim, a solução foi testada por meio de cenários que simulavam o uso por meio dos atores Aluno e Docente. A demonstração está detalhada no capítulo 4.

\section{A Modelagem}

A modelagem foi desenvolvida utilizando-se a ferramenta~\emph{agentTool}. A ferramenta possui meios para diagramar todas as fases e passos do MASE, auxiliando o analista em todos os diagramas necessários, além de gerar código automático para alguns frameworks de SMA.

Conforme dito a respeito do MASE, a metodologia é dividida em duas fases: Análise e Design. A primeira fase, responsável pelo levantamento de requisitos e entendimento das regras e tarefas, é apresentada na subseção~\ref{subsection:analise}. A segunda fase está apresentada em~\ref{subsection:design}.

\subsection{Análise}\label{subsection:analise}

A metodologia inicia-se com o passo de captura das metas. Para tanto, foi necessário primeiramente um levantamento inicial dos requisitos do SMA. Os requisitos foram levantados e compreendidos por meio de~\cite{editalFrank}, onde é possível listar:

\begin{enumerate}
	\item O sistema deve manter um modelo do estudante, onde será determinado o seu estilo de aprendizagem e será notíficado ao docente.
	\item O sistema deve assistir (auxiliar) o aluno por meio de um grupo de trabalho.
	\item O sistema deve fazer interface com Ambiente Virtual de Aprendizagem, a fim de estabelecer comportamentos do estudante.
	\item O sistema deve criar uma modelagem cognitiva do aluno, onde são mantidas informações sobre o desempenho, de acordo sua interação em Ambiente Virtual de Aprendizagem, e informações a respeito do seu estilo de aprendizagem.
	\item O sistema deve criar uma modelagem metacognitiva do aluno, onde são armazenadas informações com o intuito de melhorar processos de aprendizagem de domínios específicos.
	\item O sistema deve criar uma modelagem afetiva do estudante, especificamente a respeito da modelagem da personalidade e emoções do estudante.
	\item O sistema deve fazer interface com Ambiente Virtual de Aprendizagem.
	\item O sistema deve refutar ou confirmar o estilo de aprendizagem do aluno a partir do desempenho relacionado à interação com o sistema e/ou com Ambiente Virtual de Aprendizagem.
	\item O sistema SMA deve atualizar o modelo do estudante com base em inferências a partir dos registros de trabalho do estudante.
	\item O sistema deve construir o modelo do estudante a partir de uma modelagem explícita, ou seja, a partir do feedback explícito do estudante (questionário).
	\item O sistema deve construir o modelo do estudante a partir de uma modelagem implícita, ou seja, a partir do desempenho obtido nas ferramentas de aprendizado.
\end{enumerate}

A partir dos requisitos de~\cite{editalFrank}, foi possível estabelecer metas que o sistema deveria atingir para satisfazê-los:

\begin{itemize}
	\item Manter um modelo do estudante.
	\item Auxiliar o aluno por meio de um grupo de trabalho (Workgroup).
	\item Notificar ao docente.
	\item Interface com ambientes de virtuais de aprendizagem.
	\item Interface com o Aluno.
	\item Criar modelagem cognitiva.
	\item Criar modelagem metacognitiva.
	\item Criar modelagem modelagem afetiva.
	\item Criar modelagem da personalidade.
	\item Criar modelagem das emoções do estudante.
	\item Confirmar estilo de aprendizagem do aluno.
	\item Refutar estilo de aprendizagem do aluno.
	\item Construir modelo de desempenho do aluno.
	\item Construir modelagem explícita.
	\item Construir modelagem implícita.
	\item Construir modelo de estilo de aprendizagem do aluno.
\end{itemize}

A partir do levantamento, foi possível observar que a meta "Manter um modelo do estudante" abrange o escopo geral de toda a aplicação, sendo possível estabelecer como meta do sistema. A meta "Auxiliar o aluno por meio de um grupo de trabalho" indica que o SMA deverá criar um grupo de trabalho para cada aluno que estiver usando o sistema. O grupo de trabalho deve ser composto pelos agentes cognitivo, afetivo e metacognitivo, onde cada um possui suas respectivas metas. No levantamento, foram previstas três interfaces: Interface Web com o Aluno, notificação do docente (via Web) e interface com ambientes de virtuais de aprendizagem.

A hierarquizar de metas do SMA Frank~\ref{fig:metas-frank} foi desenvolvida para encontrar quais metas poderiam ser estabelecidas com o cumprimento de outras. Os retângulos em cinza representam metas particionadas.

\begin{sidewaystable}
	\centering
	\includegraphics[scale=0.8]{images/metas-frank.png}
	\caption{Hierarquia de Metas do SMA Frank.}
	\label{fig:metas-frank}
\end{sidewaystable}

Foram levantados 5 principais casos de uso, alguns com fluxos alternativos que representam fluxos alternativos no caso de uso, mas não necessariamente implicam em uma execução no SMA, apenas na parte Web, como por exemplo: Erro de Login. Para fins de detalhamento, este trabalho utiliza-se da notação completa de desenvolvimento de casos de uso.

O primeiro caso de uso diz respeito à modelagem cognitiva do aluno. Existem dois cenários possíveis: Modelagem implícita (principal cenário de sucesso) e modelagem explícita (cenário alternativo). Basicamente o SMA deverá processar o questionário de estilos de aprendizagem, respondido pelo aluno, para inferir explicitamente o seu modelo cognitivo e deverá analisar as respostas enviadas por ele para inferir explicitamente o seu modelo cognitivo.

\input{capitulos/casos-uso/uc1}

O segundo caso de uso descreve o cenário de notificação do docente. Nele, o docente é autenticado no sistema e o sistema exibe uma lista de alunos disponíveis nas mais diversas turmas. O docente seleciona um aluno e então o sistema exibe os dados relativos ao modelo do aluno. O trecho possui a descrição do caso de uso.

\input{capitulos/casos-uso/uc2}

Os terceiro e quarto casos de uso dizem respeito à inferência do modelo afetivo e metacognitivo do aluno, respectivamente.

\input{capitulos/casos-uso/uc3}

\input{capitulos/casos-uso/uc4}

Por fim, o último caso de uso foi levantado para prever a interação do AVA com o SMA Frank. Devido a possibilidade dos Ambientes Virtuais de Aprendizagem serem desenvolvidos em qualquer linguagem, é necessário utilizar-se de uma forma de comunicação comum entre aplicações.

Logo o SMA Frank irá utilizar-se de WebServices para a comunicação externa, garantindo que diversas aplicações poderão interagir com o SMA. Para novos AVAs, tudo o que precisará ser feito é a implementação da assinatura do serviço no WebService. Dessa forma a solução garante uma intervenção mínima no código do AVA, exigindo menos tempo na codificação da comunicação e garantindo o foco na inferência à ser feita pelo SMA. Segue a descrição do caso de uso.

\input{capitulos/casos-uso/uc5}

Após o desenvolvimento dos casos de uso, foi necessário refinar os diagramas de sequência. Todos os diagramas foram desenvolvidos na ferramenta~\emph{agentTool}, visto que ele acompanha todas as fases do MASE. Para o primeiro caso de uso, foram desenvolvidos dois diagramas de sequência distintos: Um para o fluxo principal e outro para o fluxo alternativo.

A imagem~\ref{fig:dss-uc1-fluxo-principal} refere-se ao fluxo principal do caso de uso 1. Neste diagrama de sequência, existem 6 regras. O fluxo do Sistema inicia-se com a regra~\emph{StudentInterface}, onde ele envia os dados de questionário para o~\emph{Manager}. Este então gera um evento de localização do aluno. Em seguida, gera o evento enviar para a regra~\emph{StudentWorkGroup}, com o parâmetro~\emph{questionário}. A regra~\emph{StudentWorkGroup} gera o evento de enviar para as regras~\emph{CognitiveAction},~\emph{AffectiveAction} e~\emph{MetacognitiveAction}. Eles retornam respectivamente os modelos~\emph{Cognitivo},~\emph{Afetivo} e~\emph{Metacognitivo}. A regra~\emph{cognitiveAction} ainda gera mais um evento de envio para a regra~\emph{LearningMethodAnalyzer}, que retorna o estilo de aprendizagem.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/dss-uc1-fluxo-principal.png}
	\caption{Diagrama de sequência do fluxo principal, caso de uso 1.}
	\label{fig:dss-uc1-fluxo-principal}
\end{figure}

A imagem~\ref{fig:dss-uc1-fluxo-alternativo} representa o fluxo de exceção do primeiro caso de uso. A regra~\emph{WebServiceInterface} recebe os dados do AVA e envia para a regra Manager por meio do evento~\emph{enviar}. Após esse evento, a regra~\emph{StudentWorkgroup} recebe o evento e reenvia para~\emph{CognitiveAction}. Em seguida ele envia para as regras~\emph{LearningMethodAnalyzer} e~\emph{PerformanceAnalyzer} que vão inferir o estilo de aprendizagem e a performance. Por fim, com estes dados, o modelo cognitivo é retornado para a regra~\emph{StudentWorkgroup}.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/dss-uc1-fluxo-alternativo}
	\caption{Diagrama de sequência do fluxo de exceção, caso de uso 1.}
	\label{fig:dss-uc1-fluxo-alternativo}
\end{figure}

A imagem~\ref{fig:dss-uc3-fluxo-principal} representa o fluxo principal do caso de uso 3, inferência afetiva. O processo de comunicação das regras~\emph{WebServiceInterface} e~\emph{StudentWorkgroup} funciona de forma semelhante ao diagrama anterior. A regra~\emph{AffectiveAction} gera um evento de inferência de modelagem afetiva.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/dss-uc3-fluxo-principal.png}
	\caption{Diagrama de sequência do fluxo principal, caso de uso 3.}
	\label{fig:dss-uc3-fluxo-principal}
\end{figure}

O diagrama de sequência 4~\ref{fig:dss-uc4-fluxo-principal} funciona similar ao caso de uso anterior, com a diferença de que a regra~\emph{MetacognitiveAction} realiza a inferência da modelagem metacognitiva.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/dss-uc4-fluxo-principal.png}
	\caption{Diagrama de sequência do fluxo principal, caso de uso 4.}
	\label{fig:dss-uc4-fluxo-principal}
\end{figure}

Por fim o último diagrama de sequência~\ref{fig:dss-uc5-fluxo-principal} representa a counicação da regra~\emph{WebServiceInterface} com a regra~\emph{Manager}. A primeira realiza a validação de dados e em seguida o envio de dados. Após receber os dados, a regra~\emph{Manager} localiza o aluno e continua o fluxo de execução.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/dss-uc5-fluxo-principal.png}
	\caption{Diagrama de sequência do fluxo principal, caso de uso 5.}
	\label{fig:dss-uc5-fluxo-principal}
\end{figure}

Por fim, após o levantamento de todas as regras foi necessário criar tarefas que satisfaçam o cumprimento das regras. Em outras palavras, é necessária a criação do~\emph{MASE Role Model}. A tabela~\ref{tabela:mase-role-model} representa as metas criadas para o SMA, bem como as suas respectivas tarefas. É importante ressaltar que, devido aos objetivos deste trabalho, houve um refinamento muito maior do agente cognitivo. Os agentes afetivos e metacognitivos foram apenas projetados na arquitetura.

\begin{table}
	\caption{Estruturação das Tarefas por Regra}
	\begin{tabular}{|p{5cm} | p{9cm}|}
		\hline
		\textbf{Regra}		& \textbf{Tarefas} \\
		\hline
		StudentInterface 	& Validar Dados, Autenticar Aluno  \\
		\hline
		WebServiceInterface 	& Validar Dados  \\
		\hline
		Manager 		& Determinar Workgroup do Aluno, Criar Workgroup do Aluno  \\ %Colocar a possibilidade de balancear o ambiente aqui
		\hline
		StudenWorkgroup 	& Processar Dados, Atualizar Modelo   \\
		\hline
		CognitiveAction 	& Separar Dados de Aprendizagem, Atualizar Modelo Cognitivo, Atualizar Performance  \\
		\hline
		MetacognitiveAction 	& Inferir Modelo Cognitivo  \\
		\hline
		AffectiveAction 	& Inferir Modelo Afetivo  \\
		\hline
		LearningMethodAnalyzer 	& Analisar Estilo de Aprendizagem  \\
		\hline
		PerformanceAnalyzer 	& Analisar Performance  \\
		\hline
	\end{tabular}
	\label{tabela:mase-role-model}
\end{table}

A imagem~\ref{fig:frank-role-model} apresenta o~\emph{MASE Role Model} e a sua estruturação das regras e tarefas. De forma geral, a regra~\emph{Manager} é a responsável pela gerência de todo o SMA. Ela pode receber os dados da regra~\emph{StudenInterface} (Interface Web da Aplicação) ou~\emph{WebServiceInterface} (Ambientes Virtuais de Aprendizagem). Além disso, a regra~\emph{StudenInterface} possui uma tarefa para autenticação do aluno, onde ela encaminha uma mensagem para a regra~\emph{Manager} que cria o workgroup do aluno.

A regra~\emph{StudentWorkgroup} será a regra responsável pela gerência do grupo de trabalho do aluno. Ela recebe os dados da regra~\emph{Manager} e reencaminha para as regras~\emph{Cognitive},~\emph{Affective} e~\emph{Metacognitive}. As linhas tracejadas de cor azul representam comunicações internas entre as regras.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/mase-role-model.png}
	\caption{Diagrama ~\emph{MASE Role Model} gerado para o SMA Frank.}
	\label{fig:frank-role-model}
\end{figure}

A ferramenta~\emph{agentTool} automaticamente indicou a criação dos~\emph{Concurrent Tasks Diagrams} para cada tarefa. O fluxo de execução pode iniciar-se nas regras~\emph{StudentInterface} ou ~\emph{WebServiceInterface}. Elas representam respectivamente as interações com o Aluno e com o Ambiente Virtual de Aprendizagem.

Na regra~\emph{WebServiceInterface}, o diagrama da tarefa "Validar Dados"~\ref{fig:validar-dados} inicia com o recebimento de uma mensagem de um agente "a" e os dados "DadosWebService". A tarefa passa ao estado "ValidarDados", onde ele recupera as variáveis "idUsuario" e "status" (verificação se o usuário é válido no ambiente). Em seguida a variável "status" é testada: Caso seja inválida o agente "a" recebe um código de erro. Caso contrário, a tarefa muda para o estado "enviarDados". Basicamente, o estado procura onde está a tarefa "manager" e encaminha os dados "DadosWebService"
 
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-validar-dados.png}
	\caption{Detalhamento da tarefa "Validar Dados" que pertence à regra~\emph{WebServiceInterface}.}
	\label{fig:validar-dados}
\end{figure}

O diagrama da tarefa "Enviar Questionário"~\ref{fig:td-enviar-quest}, da regra~\emph{StudentInterface} inicia-se com uma mensagem da plataforma web contendo os dados do questionário. Esses dados são convertidos para uma linguagem comum no SMA. Em seguida, esse questionário é enviado para o manager.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-enviar-quest.png}
	\caption{Detalhamento da tarefa "Enviar Questionário" que pertence à regra~\emph{StudentInterface}.}
	\label{fig:td-enviar-quest}
\end{figure}

Ainda na regra~\emph{StudentInterface}, o diagrama da tarefa "Autenticar Aluno"~\ref{fig:td-autenticar-aluno} inicia com uma mensagem da plataforma web contendo o aluno a ser criado. A tarefa verifica a existência do aluno e em caso negativo, envia a mensagem de criação à tarefa~\emph{Manager}. Caso contrário, envia uma mensagem de erro à plataforma Web.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-autenticar-aluno.png}
	\caption{Detalhamento da tarefa "Autenticar Aluno" que pertence à regra~\emph{StudentInterface}.}
	\label{fig:td-autenticar-aluno}
\end{figure}

Agora na regra ~\emph{Manager}, o diagrama da tarefa "Determinar WG do Aluno"~\ref{fig:td-determinar-wg} (Determinar Workgroup do Aluno) inicia-se com entrada de uma mensagem recebida de um agente~\emph{agent} e o estado "DeterminarWorkgroup". Basicamente, ele apenas procura o grupo de trabalho do aluno. Por fim, pelo teste de validade do grupo de trabalho (~\emph{wg = VALIDO}), os dados são enviados para o respectivo grupo de trabalho caso ele sejá válido. Caso contrário, é enviado uma mensagem de erro ao agente que iniciou a conversação.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-determinar-wg.png}
	\caption{Detalhamento da tarefa "Determinar WG do Aluno" que pertence à regra~\emph{Manager}.}
	\label{fig:td-determinar-wg}
\end{figure}

O diagrama da tarefa "Criar Workgroup"~\ref{fig:td-criar-wg} da regra~\emph{Manager} inicia-se com entrada de uma mensagem vinda da tarefa~\emph{studentInterface} e a mudança para o estado "criarWorkgroup". O estado cria os agentes cognitivo, metacognitivo, afetivo e o workgroup propriamente dito. Por fim, caso o workgroup seja válido, ou seja, não tenha ocorrido nenhum erro durante a criacão, é enviado um código de sucesso à tarefa~\emph{studentInterface}. Caso contrário, o workgroup deve ser criado novamente.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-criar-wg.png}
	\caption{Detalhamento da tarefa "Criar Workgroup" que pertence à regra~\emph{Manager}.}
	\label{fig:td-criar-wg}
\end{figure}

Agora na regra~\emph{StudentWorgroup}, o diagrama da tarefa "Processar Dados"~\ref{fig:td-criar-wg} mostra que o modelos do aluno são separados e enviados junto com os dados do SMA para os respectivos agentes.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-processar-dados.png}
	\caption{Detalhamento da tarefa "Processar Dados" que pertence à regra~\emph{StudentWorkgroup}.}
	\label{fig:td-processar-dados}
\end{figure}

O diagrama da tarefa "Atualizar Modelos"~\ref{fig:td-atualizar-modelos} pode parecer mais complexo, porém sua execução é basicamente simples. Ele representa o recebimento das inferências cognitiva, metacognitiva e afetiva. A transição inicia-se com o recebimento de um desses modelos. A tarefa vai para o estado "Aguardar Modelo Completo", onde verifica se os três modelos já foram inferidos. Se a verificação for válida, a tarefa é terminada e o objetivo de inferência dos modelos é atingido. Caso contrário, a tarefa aguarda as outras inferências e muda seu estado quando elas chegarem, repetindo assim o fluxo inicial.

\begin{figure}
	\centering
	\includegraphics[scale=0.4]{images/td-atualizar-modelos.png}
	\caption{Detalhamento da tarefa "Atualizar Modelos" que pertence à regra~\emph{StudentWorkgroup}.}
	\label{fig:td-atualizar-modelos}
\end{figure}

As regras~\emph{AffectiveAction} e~\emph{MetacognitiveAction} possuem tarefas semelhantes. Os seus diagramas~\ref{fig:td-inferir-afetivo} e ~\ref{fig:td-inferir-metacognitivo} basicamente mostram que elas recebem a mensagem do~\emph{workgroup} e realizam a sua inferência. Devido ao objetivo deste trabalho não ser estudar especificamente essas inferências, mas, criar a arquitetura do SMA Frank, foi previsto apenas os agentes e a etapa de inferência dos modelos.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-inferir-afetivo.png}
	\caption{Detalhamento da tarefa "Inferir Modelo Afetivo" que pertence à regra~\emph{AffectiveAction}.}
	\label{fig:td-inferir-afetivo}
\end{figure}

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-inferir-metacognitivo.png}
	\caption{Detalhamento da tarefa "Inferir Modelo Metacognitivo" que pertence à regra~\emph{MetacognitiveAction}.}
	\label{fig:td-inferir-metacognitivo}
\end{figure}

A regra~\emph{CognitiveAction} possui um detalhamento maior, visto que será necessário a inferência explícita do estilo de aprendizagem do aluno. Para tanto, as regras possuem uma comunicação interna (representada pela linha tracejada azul) significando que provavelmente estarão no mesmo agente. De forma simples as tarefas da regra~\emph{CognitiveAction} "Separar Dados de Aprendizagem" e "Atualizar Modelo" fazem o semelhante que já foi mostrado em outras tarefas. Portanto, o diagrama destas tarefas foi suprimido.
%%%%Suprimi as tarefas

A regra~\emph{LearningMethodAnalyzer} possui a tarefa, onde seu diagrama~\ref{fig:td-analise-aprendizagem} mostra o processo de análise do estilo de aprendizagem. Basicamente, o diagrama mostra que a inferência deve ser do tipo explícita caso os dados sejam o questionário. Caso contrário, a inferência deve ser implícita e pode variar de acordo com o ambiente virtual de aprendizagem.
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/td-analise-aprendizagem.png}
	\caption{Detalhamento da tarefa "Analisar Estilo de Aprendizagem" que pertence à regra~\emph{LearningMethodAnalyzer}.}
	\label{fig:td-analise-aprendizagem}
\end{figure}

\subsection{Design}\label{subsection:design}

Após a conclusão da primeira etapa do MASE, é necessário definir as classes dos agentes, bem como as suas conversações. A arquitetura~\ref{fig:agent-class-diagram} do SMA Frank é composta pelos seguintes agentes:

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/agent-class-diagram.png}
	\caption{Diagrama de Classes do SMA Frank.}
	\label{fig:agent-class-diagram}
\end{figure}

\begin{itemize}
	\item GatewayAgent - Possui a regra StudentInterface, responsável pela interface com a plataforma web, ou seja, com o estudante e o docente.
	\item WebServiceAgent - Possui a regra~\emph{WebServiceInterface}, é responśavel pela interface com os ambientes virtuais de aprendizagem.
	\item Manager - Possui a regra~\emph{Manager}, é responsavel pela gerência da plataforma: Criação dos agentes, encaminhamento de mensagens.
	\item WorkgroupAgent - Possui a regra~\emph{StudentWorkgroup}, responsável pela gerência do grupo de trabalho de um determinado aluno.
	\item CognitiveAgent - Possui as regras~\emph{CognitiveAction},~\emph{LearningStyleAction}. Responsável pela inferência do modelo cognitivo do aluno.
	\item AffectiveAgent - Possui a regra~\emph{AffectiveAction}. Responsável pela inferência do modelo afetivo do aluno.
	\item MetacognitiveAgent - Possui a regra~\emph{MetacognitiveAction}. Responsável pela inferência do modelo metacognitivo do aluno.
\end{itemize}

As conversações são definidas da seguinte forma:
\begin{itemize}
	\item Conv1 - Conversação do~\emph{WebServiceAgent} com o~\emph{ManagerAgent}
	\item Conv2 - Conversação do~\emph{GatewayAgent} com o~\emph{ManagerAgent}
	\item Conv3 - Conversação do~\emph{ManagerAgent} com o~\emph{WorkgroupAgent}
	\item Conv4, Conv5 e Conv6 - Conversação do~\emph{WorkGroupAgent} com os agentes~\emph{CognitiveAgent}, ~\emph{MetacognitiveAgent} e ~\emph{AffectiveAgent}, respectivamente.
\end{itemize}

A primeira conversação (conv1) ocorre de forma simples. No lado do iniciador da conversação~\ref{fig:conv1-iniciador}, ele solicita ao respondedor a verificação da existência do aluno na plataforma e entra no estado de espera. Caso a resposta seja~\emph{usuarioValido}, o iniciador irá enviar a mensagem~\emph{enviarDados} e encerrar a execução normalmente. Caso contrário, entrará no estado de falha, onde informará erro de execução.
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/conv1-iniciador.png}
	\caption{Detalhamento da Conversação 1 no lado do Iniciador.}
	\label{fig:conv1-iniciador}
\end{figure}
No lado respondedor da conversação~\ref{fig:conv1-respondedor}, ela se inicia com o request do iniciador e o estado verificar, onde é verificado a existência do aluno. Por fim, é enviado uma resposta sobre a existência do aluno para o iniciador da conversaçào.

\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/conv1-recebedor.png}
	\caption{Detalhamento da Conversação 1 no lado do Respondedor.}
	\label{fig:conv1-respondedor}
\end{figure}

A segunda conversação (conv2) possui a mesma dinâmica da conversação 1, portanto seu diagrama será suprimido.

A conversação 3 (conv3) é bastante simples. Não há nenhum estado de transição durante a conversação, pois é apenas um encaminhamento de dados para o grupo de trabalho do aluno.

As conversações 4, 5 e 6 (conv4, conv5 e conv6) possuem dinâmica bastante semelhante. Do lado do iniciador, basicamente ele envia um request com o modelo a ser inferido, os dados a serem analisados e entra em estado de espera. Em seguida, quando receber a resposta, ele atualiza o modelo cognitivo. A imagem~\ref{fig:conv4-iniciador} detalha a conversação 4, que pode ser generalizado para a 5 e 6.
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/conv4-iniciador.png}
	\caption{Detalhamento da Conversação 4 no lado iniciador.}
	\label{fig:conv4-iniciador}
\end{figure}

O lado do recebedor recebe o request e infere o modelo do aluno. Por fim, apenas reenvia novamente ao iniciador da conversação.  A imagem~\ref{fig:conv4-recebedor} detalha a conversação 4, que pode ser generalizado para a 5 e 6.
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/conv4-recebedor.png}
	\caption{Detalhamento da Conversação 4 no lado iniciador.}
	\label{fig:conv4-recebedor}
\end{figure}

A última conversação, conv7~\ref{fig:conv7-iniciador}, é representa a conversação para criação do grupo de trabalho do aluno. No lado do iniciador, ele requisita a verificação da existência do aluno no ambiente. Caso não exista, ele envia a resposta de criação do grupo de trabalho para o recebedor da conversação.
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/conv7-iniciador.png}
	\caption{Detalhamento da Conversação 7 no lado iniciador.}
	\label{fig:conv7-iniciador}
\end{figure}

Do lado do recebedor~\ref{fig:conv7-recebedor}, ele recebe o request e faz a verificação da existência do aluno. Caso já exista, a conversação é encerrada. Caso contrário, ele entra no estado de espera e em seguida faz a criação do workgroup.
\begin{figure}
	\centering
	\includegraphics[scale=0.48]{images/conv7-recebedor.png}
	\caption{Detalhamento da Conversação 7 no lado recebedor.}
	\label{fig:conv7-recebedor}
\end{figure}

A arquitetura de deploy do trabaho deve ser dinâmica, visto que os agentes de trabalho devem ser instânciados dinâmicamente. Funcionando em ambiente descentralizado, o SMA Frank precisa balancear a carga de uso entre os ambientes disponíveis. Dessa forma, o diagrama de deploy foi desnecessário.

\section{Arquitetura}

A arquitetura do sistema foi separada em duas aplicações: A parte Web chamada de~\emph{Frank Web} e a parte Sistema Multiagente chamada de~\emph{SMA Frank}. Esta seção pretende relatar a arquitetura interna de cada parte, bem como as dificuldades encontradas na integração entre ambas.

A solução foi separada devido aos seguintes aspectos:
\begin{itemize}
	\item Maior Distribuição - É possível replicar a parte web em vários nós de uma rede, possibilitando assim um maior ganho de performance da aplicação.
	\item Menor Complexidade - Os objetivos das aplicações estão separados, modularizando assim as responsabilidades de cada parte.
	\item Menor Dificuldade - A parte Web é responśavel pela interação com o usuário e com o banco de dados. Estes pontos seriam muito mais difíceis de implementar no framework JADE.
\end{itemize}

\subsection{Frank Web}
A parte Web utiliza-se do framework JBoss Seam, confome dito anteriormente, um framework que acelera o tempo de desenvolvimento de aplicações dinâmicas para a Web. Para facilitar a manutenção do código e a reescrita de alguma parte dele, foi adotado o padrão de projetos
Model View Controller (MVC). Esse padrão divide a arquitetura do sistema em três partes:

\begin{itemize}
	\item Apresentação - Responsável pela apresentação dos dados para o usuário em uma página web.
	\item Controladora - Determina o componente a ser executado.
	\item Modelo - Representação das entidades, auxiliam na interação com o banco dados.
\end{itemize}

As ferramentas disponibilizadas pelo framework geraram todo o código para visualização, inserção, atualização e exclusão de dados. Além disso, geraram todas as páginas para que o usuário possa interagir com o sistema. 

Após a geração do código inicial, foi necessário uma implementar algumas funcionalidades específicas da aplicação Frank-Web. A primeira delas foi implementar a ação de autenticação conjunta com o SMA. Quando o aluno fizer login no sistema, a aplicação web envia uma mensagem ao sistema multiagente para a criação do grupo de trabalho.

Em seguida, foi necessário a implementação a tela de respostas do questionário feita pelo usuário.

Por fim, a implementação da tela de notificação ao docente do estilo de aprendizagem do aluno.

\subsection{SMA Frank}

O SMA Frank foi desenvolvida com o~\emph{middleware} JADE, devido à sua grande aceitação na comunidade de Sistemas Multiagentes e o extenso suporte da comunidade. A aplicação está divida entre os agentes criados e os seus comportamentos (justificados na seção anterior).

A comunicação entre os agentes foi implementado utilizando-se de ontologias. O pacote de ontologia do JADE permite a criação de abstrações muito robustas, descartando neste primeiro momento a utilização de bibliotecas de terceiros.

No JADE, os agentes devem adicionar comportamentos, que são disparados quando o agente recebe uma mensagem. Os comportamentos são separados conforme o objetivo do agente.

Foram implementadas duas ontologias. A primeira, chamada de~\emph{FrankManagementOntology}, tem a função de gerenciamento da plataforma. Logo as ações de criação e destruição de agentes estarão presentes nela.

A ontologia~\emph{ModelInferOntology} possui a função de modelar todos os conceitos relacionados à inferência do modelo do aluno. Portanto, conceitos como estilo de aprendizagem, modelo cognitivo, afetivo e metacognitivo devem estar nesta ontologia. É importante ressaltar que os modelos não estão completos, sendo necessário que em trabalhos futuros sejam modeladas as ontologias.

\subsection{Integração Entre as Aplicações}

A integração entre o~\emph{Frank Web} e o~\emph{SMA Frank} pareceu bastante complexa em uma análise inicial. Por não compartilhar a mesma Máquina Virtual Java (JVM), a dificuldade de integração pareceu alta.

O Jade porém possui uma forma nativa em que aplicações externas podem se conectar com o ambiente em execução. A classe~\emph{DynamicJadeGateway} registra um agente na plataforma, que atuará como uma ponte entre a aplicação e o ambiente de execução.

Esse agente funcionará de forma distinta dos outros agentes da plataforma. O agente não receberá mensagens da aplicação Web, ao invés disso receberá objetos JAVA que representarão comandos. Para os diferentes comandos, o agente pode lançar diferentes mensagens na plataforma SMA. A aplicação~\emph{Frank SMA} implementa 6 comandos:

\begin{itemize}
	\item AnswerCommand
	\item CreateAgentCommand
	\item DestroyAgentCommand
	\item DimensionCommand
	\item ProcessQuestionnaireCommand
	\item RequestCognitiveModelCommand
\end{itemize}


























